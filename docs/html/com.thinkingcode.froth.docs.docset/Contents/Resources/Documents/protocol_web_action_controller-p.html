<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Froth API: &lt;WebActionController&gt; Protocol Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>&lt;WebActionController&gt; Protocol Reference</h1><!-- doxytag: class="WebActionController-p" -->
<p>Action controllers are the heart of a Cocoa Web App, they are considered short lived objects and must implement proper memory management to clean up after themselves. They only live for the lifespan of the request.  
<a href="#_details">More...</a></p>

<p><code>#import &lt;<a class="el" href="_web_action_controller_8h_source.html">WebActionController.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for &lt;WebActionController&gt;:</div>
<div class="dynsection">
 <div class="center">
  <img src="protocol_web_action_controller-p.gif" usemap="#&lt;WebActionController&gt;_map" alt=""/>
  <map id="&lt;WebActionController&gt;_map" name="&lt;WebActionController&gt;_map">
<area href="interface_web_active_controller.html" alt="WebActiveController" shape="rect" coords="0,56,143,80"/>
</map>
 </div>
</div>

<p><a href="protocol_web_action_controller-p-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa51c5c3e952144e804212055f4c0bc76"></a><!-- doxytag: member="WebActionController&#45;p::components" ref="aa51c5c3e952144e804212055f4c0bc76" args="()" -->
(NSArray *)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_web_action_controller-p.html#aa51c5c3e952144e804212055f4c0bc76">components</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An ordered array of component names that are inserted into the request graph for processing.  See <a class="el" href="protocol_web_component-p.html" title="Components provide the ability to share control logic across a group of controllers/applications...">WebComponent</a> header for implementation details. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(NSDictionary *)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_web_action_controller-p.html#a3ebcdbc8272bd66fa6ff870abc890af0">prepareComponentWithName:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gives the controller a per/request ability to set component properties.  This gets called prior to -preProcessRequest, and can be used for component variable configureation specific to a given controller.  <a href="#a3ebcdbc8272bd66fa6ff870abc890af0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9de5a9b958724bcce375495b64b9cafa"></a><!-- doxytag: member="WebActionController&#45;p::selectorForActionName:" ref="a9de5a9b958724bcce375495b64b9cafa" args="(NSString *name)" -->
(SEL)&nbsp;</td><td class="memItemRight" valign="bottom">- <b>selectorForActionName:</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf3b5f7fbfa338908e2682268c9764be"></a><!-- doxytag: member="WebActionController&#45;p::preProcessRequest:" ref="adf3b5f7fbfa338908e2682268c9764be" args="(WebRequest *request)" -->
(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <b>preProcessRequest:</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5294f3b1ace58c95172fd7799ca25fc"></a><!-- doxytag: member="WebActionController&#45;p::postProcessResponse:fromRequest:" ref="af5294f3b1ace58c95172fd7799ca25fc" args="(id response,[fromRequest] WebRequest *request)" -->
(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <b>postProcessResponse:fromRequest:</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a666120a8e53299b245376771dc871684"></a><!-- doxytag: member="WebActionController&#45;p::defualtAction:" ref="a666120a8e53299b245376771dc871684" args="(WebRequest *request)" -->
(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <b>defualtAction:</b></td></tr>
<tr><td colspan="2"><h2>Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed7121bb63adfcdf315e8d951ddb0bad"></a><!-- doxytag: member="WebActionController&#45;p::view" ref="aed7121bb63adfcdf315e8d951ddb0bad" args="" -->
<a class="el" href="interface_web_action_view.html">WebActionView</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>view</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_web_layout_view.html">WebLayoutView</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="protocol_web_action_controller-p.html#ae1a9cb4d05c0963d36f6d2410fa9ab52">layout</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Action controllers are the heart of a Cocoa Web App, they are considered short lived objects and must implement proper memory management to clean up after themselves. They only live for the lifespan of the request. </p>
<p>Class names have the format WA&lt;Name&gt;Controller where the request would be controller-name or controller_name or controllerName</p>
<p>Actual classes should use the "WebActiveController, and other implementing classes
				for better access."</p>
<p>Built in automatic actions are as follows. A) {{method-name}} automatically maps to - (id)&lt;methodName&gt;Action:(WebRequest*)wr; B) No Method (GET) maps to -(id)index:(WebRequest*)wr; (GET)/{v} maps to -(id)object:(WebRequest*)wr; C) No Method (POST/POST) maps to -(id)create:(WebRequest*)wr; /-update:... E) No Method (DELETE) maps to -(id)delete:(WebRequest*)wr;</p>
<p>The flow of events for a Web Request is as such. 1. WebApplicationController receives a <a class="el" href="class_web_request.html" title="Encapsulates information from a request from httpd (or fastcgi)  WebRequests provide...">WebRequest</a>. 2. if controller provides "components" array, call, -preProcessRequest: forController: on each continuing if result is not nil. 2. WebApplicationController calls - (void)preProcessRequest:(WebRequest*)request if implemented. 3. WebApplicationController calls - (SEL)selectorForActionName:(NSString*)name if implemented, and uses it as &lt;ActionName&gt; 4. WebApplicationController insures that &lt;ActionName&gt; is implemented. 5. WebApplicationController calls - (void)init&lt;ActionName&gt;Action:(WebRequest*)request if implemented Notes, the WebApplicationController, should initialize and setup the controller's views, and other properties here if a custom (not defualt view) is to be used. Initializeing this method will cause the WebApplicationController to not prepare any defualts based on the request. 6. Else a class with name &lt;ActionName&gt;&lt;ControllerName&gt;View is looked up and initialized if found. 7. WebApplicationController calls - (id)&lt;actionName&gt;Action:(WebRequest*)request 8. If the above call returns a <a class="el" href="interface_web_response.html" title="Provides a final wrapper on an http response.">WebResponse</a> object, then it is rendered, else... 9. A <a class="el" href="interface_web_response.html" title="Provides a final wrapper on an http response.">WebResponse</a> is returned from [controller.view displayWithData:(above response)] //typically a NSDictionary 10. WebApplicationController calls - (void)postProcessResponse:(FOWResponse*)response fromRequest:(WebRequest*)request; on controller 11. if controller provides "components" array, call -postPRocessResponse for each while result is true (false returns a notFound response)</p>
<p>TODO: fix documentation for WebLayoutViews</p>
<p>1. WebViews handleing rendering in the following flow.</p>
<ul>
<li>(WebResponse*)displayWithData:(NSDictionary*)data is called. Subclasses can overide this to provide complete custom rendering. 2. The defualt implementation finds a &lt;ClassName&gt;Template.&lt;extention&gt; template file using</li>
<li>(NSData*)templateData; 3. The defualt implementation then parses the template with</li>
<li>(NSData*)processedTemplateData:(NSData*)templateData; 4. The defualt implementation then converts the template data into a <a class="el" href="interface_web_response.html" title="Provides a final wrapper on an http response.">WebResponse</a> with</li>
<li>(WebResponse*)responseForProcessedTemplate:(NSData*)template; </li>
</ul>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a3ebcdbc8272bd66fa6ff870abc890af0"></a><!-- doxytag: member="WebActionController&#45;p::prepareComponentWithName:" ref="a3ebcdbc8272bd66fa6ff870abc890af0" args="(NSString *componentName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSDictionary*) prepareComponentWithName: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>componentName</em></td>
          <td>&nbsp;</td>
          <td><code> [optional]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gives the controller a per/request ability to set component properties.  This gets called prior to -preProcessRequest, and can be used for component variable configureation specific to a given controller. </p>
<p>IE the Auth component uses this to allow the controller to dynamically set the allowed/deny properites for actions outside of its global AuthComponent.plist </p>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="ae1a9cb4d05c0963d36f6d2410fa9ab52"></a><!-- doxytag: member="WebActionController&#45;p::layout" ref="ae1a9cb4d05c0963d36f6d2410fa9ab52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_web_layout_view.html">WebLayoutView</a>*) layout<code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If this returns nil, the the base layout view is returned. Controllers that with to provide custom layout controllers can subclass <a class="el" href="interface_web_layout_view.html" title="Subclassable layout class for generating the layout for the request. Like actions...">WebLayoutView</a> and provide that object in the - init&lt;Action&gt;Action method </p>

<p>Reimplemented in <a class="el" href="interface_web_active_controller.html#adaa4fc3e034d74826af936b6d3e212f4">WebActiveController</a>.</p>

</div>
</div>
<hr/>The documentation for this protocol was generated from the following file:<ul>
<li><a class="el" href="_web_action_controller_8h_source.html">WebActionController.h</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Dec 22 14:06:17 2009 for Froth API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
